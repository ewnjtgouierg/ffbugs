Press ENTER to run execCommand('copy')<br><br>
Copying to clipboard: <span></span><br><br>
execCommand('copy') reports success: <label></label><br><br>
<input>
<script>
var counter = 0;
document.addEventListener('keydown', function(e) {

			if (e.keyCode != 13) return;

			var pos, activeElement = document.activeElement;
			if (activeElement)
				{
					// activeElement.blur();
					pos = activeElement.selectionStart;
				}

			var selection = window.getSelection();
    		selection.removeAllRanges();

    		var el = document.querySelector('span');
    		el.innerText = 'test_' + (++counter);
    		var range = document.createRange();
    		range.selectNodeContents(el);
    		selection.addRange(range);

    		var success = document.execCommand('copy');
    		document.querySelector('label').innerText = success.toString();
    		selection.removeAllRanges();

			if (activeElement)
				try
					{
						activeElement.focus();
						activeElement.setSelectionRange(pos, pos);
					}
				catch (e)
					{
					}

	});
</script>
